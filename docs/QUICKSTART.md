# üöÄ –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è nvim-agent

## –ü–µ—Ä–µ–¥—É–º–æ–≤–∏

- ‚úÖ Neovim 0.7.0+ (—É –≤–∞—Å: **NVIM v0.11.4**)
- ‚ö†Ô∏è plenary.nvim (–±—É–¥–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ)
- üîë OpenAI API –∫–ª—é—á (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è UI)

## –ö—Ä–æ–∫ 1: –ó–∞–ø—É—Å—Ç–∏—Ç–∏ Neovim –∑ —Ç–µ—Å—Ç–æ–≤–æ—é –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—î—é

```powershell
# –£ PowerShell
cd d:\work\nvim-agent

# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ Neovim –∑ —Ç–µ—Å—Ç–æ–≤–æ—é –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—î—é
.\run_tests.ps1 test

# –ê–±–æ –≤—ñ–¥–∫—Ä–∏—Ç–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏–π —Ñ–∞–π–ª
.\run_tests.ps1 test myfile.js
```

## –ö—Ä–æ–∫ 2: –ë–∞–∑–æ–≤—ñ –∫–æ–º–∞–Ω–¥–∏ –≤ Neovim

–ü—ñ—Å–ª—è –∑–∞–ø—É—Å–∫—É Neovim –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å:

### –ì–∞—Ä—è—á—ñ –∫–ª–∞–≤—ñ—à—ñ

| –ö–æ–º–±—ñ–Ω–∞—Ü—ñ—è | –î—ñ—è |
|------------|-----|
| `<Space>cc` | –í—ñ–¥–∫—Ä–∏—Ç–∏/–∑–∞–∫—Ä–∏—Ç–∏ —á–∞—Ç |
| `<Space>cm` | –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–∏ —Ä–µ–∂–∏–º (Ask/Edit/Agent) |
| `<Space>t1` | –£–≤—ñ–º–∫–Ω—É—Ç–∏ Review Mode |
| `<Space>t2` | –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–∏—Å—å –Ω–∞ Agent Mode |
| `<Space>t3` | –ü–æ–∫–∞–∑–∞—Ç–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∑–º—ñ–Ω |
| `<Space>t4` | –¢–µ—Å—Ç inline –∫–Ω–æ–ø–æ–∫ |
| `<Space>t5` | –ü–æ–∫–∞–∑–∞—Ç–∏ —ñ–Ω—Ñ–æ –ø—Ä–æ –ø–ª–∞–≥—ñ–Ω |

### –ö–æ–º–∞–Ω–¥–∏

```vim
:NvimAgentChat              " –í—ñ–¥–∫—Ä–∏—Ç–∏ —á–∞—Ç
:NvimAgentMode agent        " –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–∏—Å—å –≤ —Ä–µ–∂–∏–º Agent
:NvimAgentReviewMode on     " –£–≤—ñ–º–∫–Ω—É—Ç–∏ Review Mode
:NvimAgentChangesStats      " –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–º—ñ–Ω
:NvimAgentChangesPreview    " –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –∑–º—ñ–Ω–∏
```

## –ö—Ä–æ–∫ 3: –¢–µ—Å—Ç inline –∫–Ω–æ–ø–æ–∫ (–±–µ–∑ API)

```vim
" 1. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å <Space>t4 –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è mock –∑–º—ñ–Ω–∏
" 2. –ü—ñ–¥–≤–µ–¥—ñ—Ç—å –∫—É—Ä—Å–æ—Ä –¥–æ —Ä—è–¥–∫–∞ –∑ –∫–Ω–æ–ø–∫–∞–º–∏
" 3. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å –æ–¥–Ω—É –∑ –∫–ª–∞–≤—ñ—à:

ga      " Accept (–ø—Ä–∏–π–Ω—è—Ç–∏ –∑–º—ñ–Ω—É)
gd      " Discard (–≤—ñ–¥—Ö–∏–ª–∏—Ç–∏ –∑–º—ñ–Ω—É)
gA      " Accept All (–ø—Ä–∏–π–Ω—è—Ç–∏ –≤—Å—ñ)
gD      " Discard All (–≤—ñ–¥—Ö–∏–ª–∏—Ç–∏ –≤—Å—ñ)
Enter   " Accept (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ ga)
gp      " Preview (–ø–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –ø–æ–≤–Ω–∏–π preview)
```

–ú–∞—î –∑'—è–≤–∏—Ç–∏—Å—å:
```
üìã –Ñ 1 –∑–º—ñ–Ω –¥–ª—è –ø–µ—Ä–µ–≥–ª—è–¥—É. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å Enter –∞–±–æ ga...

[‚úÖ Accept] [‚ùå Discard] [‚ú® Accept All] [üóëÔ∏è Discard All]
```

## –ö—Ä–æ–∫ 4: –¢–µ—Å—Ç Review Mode (–∑ API –∞–±–æ mock)

```vim
" 1. –£–≤—ñ–º–∫–Ω—É—Ç–∏ Review Mode
<Space>t1

" 2. –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–∏—Å—å –Ω–∞ Agent Mode
<Space>t2

" 3. –í—ñ–¥–∫—Ä–∏—Ç–∏ —á–∞—Ç
<Space>cc

" 4. –ù–∞–ø–∏—Å–∞—Ç–∏ –∑–∞–ø–∏—Ç (—è–∫—â–æ —î API –∫–ª—é—á):
> –°—Ç–≤–æ—Ä–∏ —Ñ–∞–π–ª hello.txt –∑ —Ç–µ–∫—Å—Ç–æ–º "Hello World"

" 5. –ü—ñ—Å–ª—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –ø–æ–±–∞—á–∏—Ç–µ inline –∫–Ω–æ–ø–∫–∏
" 6. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å ga —â–æ–± –ø—Ä–∏–π–Ω—è—Ç–∏ –∑–º—ñ–Ω—É
```

## –ö—Ä–æ–∫ 5: –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ —Ç–µ—Å—Ç–∏

```powershell
# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –≤—Å—ñ —Ç–µ—Å—Ç–∏
.\run_tests.ps1 test-auto
```

–ú–∞—î –≤–∏–≤–µ—Å—Ç–∏:
```
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  Test Results
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
Total:  12
Passed: 12 ‚úÖ
Failed: 0 ‚ùå
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

üéâ All tests passed! üéâ
```

## –ö—Ä–æ–∫ 6: –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è API –∫–ª—é—á–∞ (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)

–î–ª—è –ø–æ–≤–Ω–æ–≥–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –∑ —Ä–µ–∞–ª—å–Ω–∏–º AI:

```powershell
# –£ PowerShell –≤—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–º—ñ–Ω–Ω—É —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
$env:OPENAI_API_KEY = "sk-your-api-key-here"

# –ê–±–æ –¥–æ–¥–∞–π—Ç–µ –≤ –ø—Ä–æ—Ñ—ñ–ª—å PowerShell –¥–ª—è –ø–æ—Å—Ç—ñ–π–Ω–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
notepad $PROFILE

# –î–æ–¥–∞–π—Ç–µ –≤ —Ñ–∞–π–ª:
$env:OPENAI_API_KEY = "sk-your-api-key-here"
```

–ü–æ—Ç—ñ–º –∑–∞–ø—É—Å—Ç—ñ—Ç—å:
```powershell
.\run_tests.ps1 test
```

–í Neovim:
```vim
<Space>cc        " –í—ñ–¥–∫—Ä–∏—Ç–∏ —á–∞—Ç
<Space>t1        " –£–≤—ñ–º–∫–Ω—É—Ç–∏ Review Mode
<Space>t2        " Agent Mode

" –£ —á–∞—Ç—ñ –Ω–∞–ø–∏—à—ñ—Ç—å:
> –°—Ç–≤–æ—Ä–∏ —Ñ–∞–π–ª test.js –∑ –ø—Ä–æ—Å—Ç–æ—é —Ñ—É–Ω–∫—Ü—ñ—î—é hello world

" –ü–æ–±–∞—á–∏—Ç–µ inline –∫–Ω–æ–ø–∫–∏, –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å ga —â–æ–± –ø—Ä–∏–π–Ω—è—Ç–∏
```

## –ö—Ä–æ–∫ 7: –¢–µ—Å—Ç –∑ Ollama (–ª–æ–∫–∞–ª—å–Ω–æ, –±–µ–∑ API –∫–ª—é—á–∞)

–Ø–∫—â–æ –Ω–µ —Ö–æ—á–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ OpenAI:

```powershell
# 1. –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å Ollama
winget install Ollama.Ollama

# 2. –ó–∞–ø—É—Å—Ç—ñ—Ç—å –º–æ–¥–µ–ª—å
ollama run llama2

# 3. –í—ñ–¥—Ä–µ–¥–∞–≥—É–π—Ç–µ test_config.lua:
# –ó–∞–∫–æ–º–µ–Ω—Ç—É–π—Ç–µ OpenAI, —Ä–æ–∑–∫–æ–º–µ–Ω—Ç—É–π—Ç–µ Local:
#     provider = "local",
#     endpoint = "http://localhost:11434/v1",
#     model = "llama2",

# 4. –ó–∞–ø—É—Å—Ç—ñ—Ç—å Neovim
.\run_tests.ps1 test
```

## Troubleshooting

### –ü–æ–º–∏–ª–∫–∞: "module 'plenary' not found"

```vim
" –£ Neovim –≤—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å plenary.nvim
:!git clone https://github.com/nvim-lua/plenary.nvim ~/.local/share/nvim/site/pack/vendor/start/plenary.nvim
```

### –ü–æ–º–∏–ª–∫–∞: "nvim-agent not found"

–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —á–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–π runtimepath:

```vim
:lua print(vim.inspect(vim.opt.runtimepath:get()))
" –ú–∞—î –º—ñ—Å—Ç–∏—Ç–∏ d:\work\nvim-agent
```

### Inline –∫–Ω–æ–ø–∫–∏ –Ω–µ –ø–æ–∫–∞–∑—É—é—Ç—å—Å—è

```vim
" –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —á–∏ —É–≤—ñ–º–∫–Ω–µ–Ω–∏–π review mode
:lua print(require('nvim-agent.mcp').review_mode)
" –ú–∞—î –≤–∏–≤–µ—Å—Ç–∏: true

" –£–≤—ñ–º–∫–Ω—ñ—Ç—å —è–∫—â–æ false:
:NvimAgentReviewMode on
```

### –ö–æ–ª—å–æ—Ä–∏ –∫–Ω–æ–ø–æ–∫ –Ω–µ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—é—Ç—å—Å—è

```vim
" –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ termguicolors
:set termguicolors?
" –ú–∞—î –±—É—Ç–∏: termguicolors

" –£–≤—ñ–º–∫–Ω—ñ—Ç—å —è–∫—â–æ –≤–∏–º–∫–Ω–µ–Ω–æ:
:set termguicolors
```

## –ù–∞—Å—Ç—É–ø–Ω—ñ –∫—Ä–æ–∫–∏

1. ‚úÖ –ë–∞–∑–æ–≤–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è UI - `<Space>cc`, `<Space>t4`
2. ‚úÖ –¢–µ—Å—Ç inline –∫–Ω–æ–ø–æ–∫ - `<Space>t4`, –ø–æ—Ç—ñ–º `ga/gd`
3. ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ —Ç–µ—Å—Ç–∏ - `.\run_tests.ps1 test-auto`
4. üîë –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ API –∫–ª—é—á (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)
5. ü§ñ –¢–µ—Å—Ç –∑ —Ä–µ–∞–ª—å–Ω–∏–º AI (OpenAI –∞–±–æ Ollama)
6. üìñ –ü—Ä–æ—á–∏—Ç–∞—Ç–∏ [INLINE_BUTTONS.md](docs/INLINE_BUTTONS.md)
7. üìñ –ü—Ä–æ—á–∏—Ç–∞—Ç–∏ [EXAMPLES.md](docs/EXAMPLES.md)

## –ö–æ—Ä–∏—Å–Ω—ñ –∫–æ–º–∞–Ω–¥–∏

```powershell
# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
.\run_tests.ps1 check

# –û—á–∏—Å—Ç–∏—Ç–∏ —Ç–µ—Å—Ç–æ–≤—ñ —Ñ–∞–π–ª–∏
.\run_tests.ps1 clean

# –í—ñ–¥–∫—Ä–∏—Ç–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—é
.\run_tests.ps1 docs

# –ü–æ–∫–∞–∑–∞—Ç–∏ –º–µ–Ω—é
.\run_tests.ps1 help
```

---

**–ì–æ—Ç–æ–≤–æ –¥–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è! üéâ**

–ù–∞–π–ø—Ä–æ—Å—Ç—ñ—à–∏–π —Å–ø–æ—Å—ñ–± –ø–æ—á–∞—Ç–∏:
```powershell
.\run_tests.ps1 test
```

–ü–æ—Ç—ñ–º –≤ Neovim:
```vim
<Space>t5    " –ü–æ–∫–∞–∑–∞—Ç–∏ —ñ–Ω—Ñ–æ
<Space>t4    " –¢–µ—Å—Ç inline –∫–Ω–æ–ø–æ–∫
```
